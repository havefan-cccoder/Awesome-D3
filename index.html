<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>d3 test</title>
    <script src="d3.js"></script>
</head>
<body>
    <script>
        // var arr = ['1','2','3','4','5']
        // d3.select("body").selectAll("p").data(arr).enter().append("p").text(function(d) {
        //     return d;            
        // })

        var w = 500;
        // var h = 200;
        var h = 500;
        var svg = d3.select("body").append("svg");
        svg.attr("width",w)
            .attr("height",h);


        var g1 = svg.append("g");
        var g2 = svg.append("g");
        var dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13, 11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];
        var datagap = 1;
        //圆
        var circles = g1.selectAll("circle").data(dataset).enter().append("circle");
        circles.attr("cx",function(d,i){
                    return (i*50)+25;
                })
                .attr("cy",h/2)
                .attr("r",function(d){
                    return d;
                })
                .attr("fill","yellow")
                .attr("stroke","red")
                .attr("stroke-width",function(d){
                    return d/2;
                });
        //条形图
        var rects = g2.selectAll("rect")
                      .data(dataset)
                      .enter()
                      .append("rect")
                      .attr("width",function(i){
                          return w / dataset.length - datagap;
                      })
                      .attr("height",function(i){
                          return i*5;
                      })
                      .attr("x",function(d,i){
                          return i*(w / dataset.length);
                      })
                      .attr("y",function(i){
                          return h - i*5;
                      })
                      .attr("fill",function(d){
                          return "rgb(0,0,"+ (d*10) +")";
                      });
        var texts = g2.selectAll("text")
                         .data(dataset)
                         .enter()
                         .append("text")
                         .text(function(d){
                             return d;
                      })
                      .attr("x",function(d,i){
                        //   return i*(w / dataset.length)+(w/dataset.length-datagap)/2;
                          return i*(w / dataset.length);
                      })
                      .attr("y",function(d){
                          return h - d * 5 + 14;
                      })
                      .attr("fill","#fff")
                      .attr("font-size","11px")
                      .attr("text-anchor","middle")//奇妙！！


        //散点图
        var scale = d3.scale.linear()
                            .domain([100,500])
                            .range([10,350]);
        var dataset3 = [[5, 20], [480, 90], [250, 50], [100, 33], [330, 95],
                        [410, 12], [475, 44], [25, 67], [85, 21], [220, 88] , [600,150]];
//          d3.max(dataset,function(d){
//              return d[0]
//          });

        var padding = 20
        var xScale = d3.scale.linear()
                             .domain([0,d3.max(dataset3,function(d){
                                  return d[0]
                              })])
                            //   .range([0,w]);
                            //   .range([padding,w - padding]);
                              .range([padding*2,w - padding*2]);
        var yScale = d3.scale.linear()
                             .domain([0,d3.max(dataset3,function(d){
                                 return d[1]
                             })])
                            //  .range([h,0])//注意！是h——>0
                            //  .range([h-padding,padding]);
                             .range([h-padding*2,padding*2]);
        var rScale = d3.scale.linear()
                              .domain([0,d3.max(dataset3,function(d){
                                  return d[1]
                              })])
                              .range([2,5]);
        var g3 = svg.append("g")
        var circles = g3.selectAll("circle")
                        .data(dataset3)
                        .enter()
                        .append("circle")
                        .attr("cx",function(d){
                            return xScale(d[0]);
                        })
                        .attr("cy",function(d){
                            return yScale(d[1])
                        })
                        .attr("r",function(d){
                            return rScale(d[1])
                        })
                        .attr("fill","blue");
        var texts3 = g3.selectAll("text")
                        .data(dataset3)
                        .enter()
                        .append("text")
                        .text(function(d){
                            return d
                        })
                        .attr("font-size","14px")
                        .attr("x",function(d){
                            return xScale(d[0])
                        })
                        .attr("y",function(d){
                            return yScale(d[1])
                        })
                   
    </script>
</html>